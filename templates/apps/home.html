<div class="page" id="home">
	<div class="page__titlebar">
		<a href="/home/home" id="backbutton">Back</a>
		<h1>Fixt Service Management</h1>
	</div>
	<div class="sections">
		<div class="section show" id="home">
			<span class="comment">
				Please log in to use the app.
			</span>
			<a href="/home/login">
				<button>Login</button>
			</a>
		</div>
		<div class="section" id="login">
			<div class="comment small">
				Please enter your user information in the form below to access your account.
			</div>
			<form id="loginform">
				<div>
					<label for="username">Username or Email</label>
					<input type="text" id="username" name="username" required>
				</div>
				<div>
					<label for="password">Password</label>
					<input type="password" id="password" name="password" required>
				</div>
				<div>
					<div class="formrow">
						<label for="remember">Remember Me</label>
						<input type="checkbox" name="remember" id="remember">
					</div>
					<a href="/home/forgot" class="small">Forgot Credentials?</a>
				</div>
				<button type="submit">Login</button>
				<span id="login-error" class="error" style="display:none;"></span>
				<span>
					New company accounts can register <a href="/home/register">here</a>.
				</span>
			</form>
			<script>
				const loginform = document.getElementById('loginform')
				loginform.onsubmit = async (e) => {
					e.preventDefault()
					const username = document.getElementById('username').value
					const password = document.getElementById('password').value
					const errorSpan = document.getElementById('login-error')
					
					try {
						errorSpan.style.display = 'none'
						await API.login(username, password)
						changeSection('home')
						console.log('Login successful')
					} catch (error) {
						errorSpan.textContent = error.message || 'Login failed'
						errorSpan.style.display = 'block'
					}
				}
			</script>
		</div>
	</div>
</div>